{% extends "base.html" %}

{% block title %}Lista de Acompanhamentos{% endblock %}

{% block header_title %}
<i class="fa-solid fa-list-check text-brand-600 mr-2"></i> Gestão de Acompanhamentos
{% endblock %}

{% block content %}

<div class="space-y-6">
    
    <div class="flex justify-end">
        <a href="{% url 'acompanhamento_novo' %}" class="px-6 py-3 bg-brand-600 text-white font-bold rounded-xl shadow-lg hover:bg-brand-800 transition transform hover:scale-[1.005]">
            <i class="fa-solid fa-plus-circle mr-2"></i> Novo Acompanhamento
        </a>
    </div>

    {% if acompanhamentos %}
    <div class="bg-white shadow-xl rounded-xl border border-brand-100 divide-y divide-brand-100">
        {% for item in acompanhamentos %}
        <div class="p-4 md:p-6 hover:bg-brand-50 transition">
            <div class="flex justify-between items-start mb-2">
                <h2 class="text-xl font-bold text-brand-900">{{ item.titulo }}</h2>
                
                <div class="flex space-x-2 text-sm font-medium">
                    <span class="px-3 py-1 rounded-full 
                        {% if item.status == 'concluido' %}bg-green-100 text-green-700
                        {% elif item.status == 'andamento' %}bg-blue-100 text-blue-700
                        {% else %}bg-gray-100 text-gray-700{% endif %}">
                        {{ item.get_status_display }}
                    </span>
                    <span class="px-3 py-1 rounded-full 
                        {% if item.prioridade == 'critica' %}bg-red-100 text-red-700
                        {% elif item.prioridade == 'alta' %}bg-yellow-100 text-yellow-700
                        {% else %}bg-gray-100 text-gray-700{% endif %}">
                        {{ item.get_prioridade_display }}
                    </span>
                </div>
            </div>

            <p class="text-brand-700 text-sm mb-3">
                <i class="fa-solid fa-calendar-check mr-1"></i> Entrega: {{ item.data_entrega|date:"d/m/Y" }} | 
                <i class="fa-solid fa-user-tag mr-1"></i> Responsável: {{ item.responsavel.username|default:"N/A" }}
            </p>

            <div class="flex space-x-3 mt-4 pt-4 border-t border-brand-50">
                <a href="{% url 'editar_acompanhamento' item.pk %}" class="text-sm font-medium text-blue-600 hover:text-blue-800 transition">
                    <i class="fa-solid fa-edit mr-1"></i> Editar
                </a>
                <a href="{% url 'deletar_acompanhamento' item.pk %}" class="text-sm font-medium text-red-600 hover:text-red-800 transition">
                    <i class="fa-solid fa-trash-alt mr-1"></i> Excluir
                </a>
            </div>
        </div>
        {% endfor %}
    </div>

    {% else %}
    <div class="bg-white p-6 rounded-xl shadow border border-brand-100 text-center">
        <p class="text-lg text-brand-800 font-semibold">Nenhum acompanhamento encontrado.</p>
        <p class="text-sm text-brand-600 mt-2">Clique em "Novo Acompanhamento" para começar.</p>
    </div>
    {% endif %}

</div>

{% endblock content %}
            
